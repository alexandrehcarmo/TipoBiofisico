<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calculadora de Estilo e Tipo Físico</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #f8f9fa;
    }
    .quiz-img {
      max-width: 100%;
      height: 250px; /* Altura fixa para uniformidade */
      object-fit: cover; /* Garante que a imagem preencha o espaço sem distorcer */
      border: 3px solid #ccc;
      border-radius: 12px;
      cursor: pointer;
      margin: 10px 0; /* Mais espaçamento */
      transition: all 0.3s ease-in-out; /* Transição suave */
    }
    .quiz-img:hover {
      border-color: #007bff;
      transform: translateY(-3px);
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .pergunta {
      display: none;
      animation: fadeIn 0.8s ease-out; /* Animação de entrada para as perguntas */
    }
    .pergunta.ativa {
      display: block;
    }
    .boneca-img {
      max-width: 120px;
      margin: 10px;
      border: 3px solid transparent; /* Bordas um pouco mais grossas */
      cursor: pointer;
      border-radius: 50%; /* Imagens redondas para as bonecas, se forem PNG com fundo transparente fica legal */
      transition: all 0.3s ease-in-out;
    }
    .boneca-img.selected {
      border-color: #28a745;
      box-shadow: 0 0 15px rgba(40, 167, 69, 0.5); /* Sombra verde */
      transform: scale(1.05); /* Pequeno zoom */
    }

    /* Estilo e animação para o resultado do Estilo */
    #estilo-resultado, #tipo-fisico-resultado { /* Aplica estilos base a ambos os resultados */
      opacity: 0;
      transform: translateY(30px);
      transition: opacity 0.8s ease-out, transform 0.8s ease-out;
      padding: 30px;
      border-radius: 15px;
      background-color: #ffffff;
      box-shadow: 0 10px 25px rgba(0,0,0,0.08);
      text-align: center;
      margin-top: 40px;
      display: none; /* Inicia oculto */
    }
    #estilo-resultado.show, #tipo-fisico-resultado.show {
      opacity: 1;
      transform: translateY(0);
      display: block; /* Mostra o elemento quando a classe 'show' é adicionada */
    }
    #estilo-resultado h3, #tipo-fisico-resultado h3 {
      font-weight: 700;
      color: #6f42c1; /* Cor de destaque */
      margin-bottom: 20px;
    }
    #estilo-resultado p.display-4, #tipo-fisico-resultado p.display-4 {
      font-size: 3.5rem;
      color: #007bff; /* Cor principal */
      font-weight: 800;
    }
    #estilo-resultado p.card-text, #tipo-fisico-resultado p.card-text {
        font-size: 1.1rem;
        line-height: 1.6;
        color: #555;
    }

    /* Estilos específicos para o resultado do Tipo Físico */
    #tipo-fisico-resultado .boneca-tipo {
        max-width: 200px;
        height: auto;
        margin: 20px auto;
        border-radius: 8px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    /* Animação para a transição das perguntas */
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>

<div class="container mt-5">
  <h2 class="mb-4 text-center">Descubra Seu Estilo!</h2>
  <div id="quiz-section">
    <div class="pergunta ativa" id="pergunta1">
      <p class="lead text-center"><strong>Pergunta 1:</strong> Qual look você prefere para um evento importante?</p>
      <div class="row justify-content-center">
        <div class="col-md-5 text-center">
          <img src="https://images.pexels.com/photos/2983464/pexels-photo-2983464.jpeg?auto=compress&cs=tinysrgb&h=400" class="quiz-img" onclick="escolherEstilo('Clássico', 1)">
          <p class="text-muted">Aparência atemporal e elegante</p>
        </div>
        <div class="col-md-5 text-center">
          <img src="https://images.pexels.com/photos/7679724/pexels-photo-7679724.jpeg?auto=compress&cs=tinysrgb&h=400" class="quiz-img" onclick="escolherEstilo('Moderno', 1)">
          <p class="text-muted">Design limpo e contemporâneo</p>
        </div>
      </div>
    </div>
    <div class="pergunta" id="pergunta2">
      <p class="lead text-center"><strong>Pergunta 2:</strong> Qual acessório reflete melhor sua personalidade?</p>
      <div class="row justify-content-center">
        <div class="col-md-5 text-center">
          <img src="https://images.pexels.com/photos/1468379/pexels-photo-1468379.jpeg?auto=compress&cs=tinysrgb&h=400" class="quiz-img" onclick="escolherEstilo('Clássico', 2)">
          <p class="text-muted">Sofisticação tradicional</p>
        </div>
        <div class="col-md-5 text-center">
          <img src="https://images.pexels.com/photos/1204468/pexels-photo-1204468.jpeg?auto=compress&cs=tinysrgb&h=400" class="quiz-img" onclick="escolherEstilo('Criativo', 2)">
          <p class="text-muted">Originalidade e ousadia</p>
        </div>
      </div>
    </div>
    <div class="pergunta" id="pergunta3">
      <p class="lead text-center"><strong>Pergunta 3:</strong> Qual tipo de estampa mais te atrai?</p>
      <div class="row justify-content-center">
        <div class="col-md-5 text-center">
          <img src="https://images.pexels.com/photos/4050345/pexels-photo-4050345.jpeg?auto=compress&cs=tinysrgb&h=400" class="quiz-img" onclick="escolherEstilo('Clássico', 3)">
          <p class="text-muted">Padronagens discretas e elegantes</p>
        </div>
        <div class="col-md-5 text-center">
          <img src="https://images.pexels.com/photos/428340/pexels-photo-428340.jpeg?auto=compress&cs=tinysrgb&h=400" class="quiz-img" onclick="escolherEstilo('Criativo', 3)">
          <p class="text-muted">Estampas vibrantes e artísticas</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Nova Div para exibir o resultado animado do estilo -->
  <div id="estilo-resultado">
    <!-- O resultado será inserido aqui via JavaScript -->
  </div>

  <hr class="my-5">

  <h2 class="mb-4 text-center">Descubra Seu Tipo Físico!</h2>
  <div id="tipo-fisico-section" class="p-4 bg-white rounded shadow-sm">
    <p class="lead text-center mb-4">Insira suas medidas (em cm) para uma análise preliminar:</p>
    <div class="row justify-content-center g-3">
      <div class="col-md-4">
        <label for="ombros" class="form-label">Ombro a ombro:</label>
        <input type="number" class="form-control" id="ombros" placeholder="Ex: 40">
      </div>
      <div class="col-md-4">
        <label for="cintura" class="form-label">Cintura:</label>
        <input type="number" class="form-control" id="cintura" placeholder="Ex: 60">
      </div>
      <div class="col-md-4">
        <label for="quadril" class="form-label">Quadril:</label>
        <input type="number" class="form-control" id="quadril" placeholder="Ex: 90">
      </div>
    </div>

    <button class="btn btn-success mt-4 d-block mx-auto" onclick="mostrarResultadoTipoFisico()">Ver Tipo Físico</button>

    <div class="mt-5 text-center">
      <p class="lead">Ou selecione qual boneca parece mais com você:</p>
      <div class="d-flex justify-content-center flex-wrap">
        <!-- ATENÇÃO: Você precisará criar estas imagens e colocá-las na pasta 'imagens/' -->
        <img src="imagens/boneca-selecao-1.svg" class="boneca-img" onclick="selecionarBoneca(1)" alt="Boneca tipo físico 1">
        <img src="imagens/boneca-selecao-2.svg" class="boneca-img" onclick="selecionarBoneca(2)" alt="Boneca tipo físico 2">
        <img src="imagens/boneca-selecao-3.svg" class="boneca-img" onclick="selecionarBoneca(3)" alt="Boneca tipo físico 3">
        <img src="imagens/boneca-selecao-4.svg" class="boneca-img" onclick="selecionarBoneca(4)" alt="Boneca tipo físico 4">
        <img src="imagens/boneca-selecao-5.svg" class="boneca-img" onclick="selecionarBoneca(5)" alt="Boneca tipo físico 5">
      </div>
      <small class="text-muted mt-2 d-block">A escolha visual ajuda a refinar a análise do seu biotipo, especialmente se as medidas não forem exatas.</small>
    </div>
  </div>

  <!-- Nova Div para exibir o resultado animado do tipo físico -->
  <div id="tipo-fisico-resultado">
    <!-- O resultado será inserido aqui via JavaScript -->
  </div>

  <div class="mt-5 mb-5 text-center">
    <button class="btn btn-secondary btn-lg" onclick="exportarResultados()">Exportar Resultados Completos</button>
  </div>
</div>

<script>
  let pontuacaoEstilos = {
    "Clássico": 0,
    "Moderno": 0,
    "Criativo": 0
  };
  let respostasEstilo = [];
  let bonecaSelecionada = null; // Para a seleção visual da boneca
  let tipoFisicoCalculado = null; // Para armazenar o tipo físico calculado pelas medidas

  // Mapa de estilos para detalhes no resultado
  const detalhesEstiloMap = {
      "Clássico": "Você tem uma preferência por looks atemporais, elegantes e com toques tradicionais. Valoriza a sofisticação e a discrição, optando por peças de alta qualidade e cortes impecáveis. Seu guarda-roupa é a base para qualquer ocasião.",
      "Moderno": "Seu estilo se inclina para o contemporâneo, com linhas limpas, minimalismo e tendências atuais. Gosta de inovar e de peças com design diferenciado, valorizando a funcionalidade e o impacto visual. Você está sempre à frente.",
      "Criativo": "Você é uma pessoa que adora ousar, misturar texturas, cores e padrões. Seu estilo é único, expressivo e cheio de personalidade, utilizando a moda como uma forma de arte. Não tem medo de experimentar e criar tendências."
  };

  // Mapa de tipos físicos para imagens e descrições (você precisará criar estas imagens!)
  const detalhesTipoFisicoMap = {
      "Ampulheta": {
          img: "imagens/tipo-fisico-ampulheta.png",
          desc: "Seu corpo possui ombros e quadris de larguras semelhantes, com uma cintura significativamente mais fina e marcada. É considerado um formato harmonioso e equilibrado."
      },
      "Retângulo": {
          img: "imagens/tipo-fisico-retangulo.png",
          desc: "As medidas de ombros, cintura e quadril são bastante semelhantes, criando uma silhueta mais reta e proporcional. Seu desafio é criar a ilusão de curvas."
      },
      "Triângulo (Pêra)": {
          img: "imagens/tipo-fisico-triangulo.png",
          desc: "Caracteriza-se por quadris visivelmente mais largos que os ombros, com cintura geralmente marcada. O foco é equilibrar a parte superior e inferior do corpo."
      },
      "Triângulo Invertido": {
          img: "imagens/tipo-fisico-triangulo-invertido.png",
          desc: "Seus ombros são mais largos que os quadris, criando uma silhueta em 'V'. O objetivo é suavizar os ombros e adicionar volume aos quadris."
      },
      "Oval (Maçã)": {
          img: "imagens/tipo-fisico-oval.png",
          desc: "A região da cintura é mais larga que os ombros e quadris, com a silhueta mais arredondada no centro. O ideal é alongar o tronco e valorizar pernas e braços."
      },
      "Indefinido": {
          img: "imagens/tipo-fisico-indefinido.png", // Imagem para quando não houver correspondência clara
          desc: "Com base nas medidas fornecidas, não foi possível classificar seu tipo físico de forma precisa. Por favor, verifique as medidas ou utilize a seleção visual da boneca."
      }
  };

  function escolherEstilo(estilo, perguntaNumero) {
    pontuacaoEstilos[estilo] += 1;
    respostasEstilo.push(estilo);

    const perguntaAtual = document.getElementById(`pergunta${perguntaNumero}`);
    perguntaAtual.classList.remove("ativa"); // Esconde a pergunta atual

    // Verifica se há uma próxima pergunta
    const proximaPergunta = document.getElementById(`pergunta${perguntaNumero + 1}`);
    if (proximaPergunta) {
      proximaPergunta.classList.add("ativa"); // Mostra a próxima pergunta
    } else {
      // Se não há próxima pergunta, o quiz terminou
      mostrarResultadoEstilo();
    }
  }

  function mostrarResultadoEstilo() {
    let estiloFinal = "Indefinido"; // Caso não haja escolhas claras
    let maxPontos = -1;

    // Encontra o estilo com a maior pontuação
    for (const estilo in pontuacaoEstilos) {
        if (pontuacaoEstilos[estilo] > maxPontos) {
            maxPontos = pontuacaoEstilos[estilo];
            estiloFinal = estilo;
        } else if (pontuacaoEstilos[estilo] === maxPontos && maxPontos > 0) {
            // Lógica para empates: pode-se priorizar um estilo, criar um "misto", etc.
            // Para este protótipo, o primeiro que atingir o maxPontos mantém a preferência.
            // Para a reunião com Leo, pergunte como ele quer tratar empates.
        }
    }

    const quizSection = document.getElementById("quiz-section");
    const estiloResultadoDiv = document.getElementById("estilo-resultado");

    // Esconde a seção do quiz
    quizSection.style.display = 'none';

    // Conteúdo do resultado com base no estilo final
    const detalhes = detalhesEstiloMap[estiloFinal] || "Não foi possível definir um estilo predominante claro com as respostas dadas. Experimente novamente ou explore outras opções!";

    estiloResultadoDiv.innerHTML = `
        <div class="card p-4 shadow-sm" style="background-color: #fcfcfc; border-left: 8px solid #007bff; ">
            <h3 class="card-title text-center mb-3 text-primary">✨ Seu Estilo Predominante é:</h3>
            <p class="card-text text-center display-4" style="color: #6f42c1;"><strong>${estiloFinal}</strong></p>
            <p class="card-text text-center mt-4">${detalhes}</p>
            <p class="card-text text-muted text-center mt-3 small">Para uma análise ainda mais detalhada e personalizada, aprofunde-se em nossa plataforma!</p>
        </div>
    `;

    // Adiciona a classe 'show' para ativar a animação CSS
    // Um pequeno timeout garante que o elemento esteja no DOM antes da animação
    setTimeout(() => {
        estiloResultadoDiv.classList.add('show');
    }, 100);
  }

  function mostrarResultadoTipoFisico() {
    const ombros = parseFloat(document.getElementById('ombros').value);
    const cintura = parseFloat(document.getElementById('cintura').value);
    const quadril = parseFloat(document.getElementById('quadril').value);

    // Validação de entrada
    if (isNaN(ombros) || isNaN(cintura) || isNaN(quadril) || ombros <= 0 || cintura <= 0 || quadril <= 0) {
      alert("Por favor, preencha todas as medidas com números válidos e positivos.");
      return;
    }

    let tipo = "Indefinido";

    // Regras de classificação de tipo físico (proporções aproximadas)
    const tolerancia = 0.05; // 5% de tolerância para "semelhante"

    // Calcular proporções
    const ombro_quadril_ratio = ombros / quadril;
    const cintura_ombro_ratio = cintura / ombros;
    const cintura_quadril_ratio = cintura / quadril;

    // Lógica para Ampulheta
    if (Math.abs(ombros - quadril) / ombros < tolerancia && cintura_ombro_ratio < 0.75) {
        tipo = "Ampulheta";
    }
    // Lógica para Retângulo
    else if (Math.abs(ombros - cintura) / ombros < tolerancia && Math.abs(cintura - quadril) / cintura < tolerancia) {
        tipo = "Retângulo";
    }
    // Lógica para Triângulo (Pêra) - Quadril > Ombros
    else if (quadril > ombros * (1 + tolerancia)) {
        tipo = "Triângulo (Pêra)";
    }
    // Lógica para Triângulo Invertido - Ombros > Quadril
    else if (ombros > quadril * (1 + tolerancia)) {
        tipo = "Triângulo Invertido";
    }
    // Lógica para Oval (Maçã) - Cintura > Ombros e Quadril
    else if (cintura > ombros * (1 + tolerancia) || cintura > quadril * (1 + tolerancia)) {
        tipo = "Oval (Maçã)";
    }

    tipoFisicoCalculado = tipo; // Armazena o tipo calculado

    const tipoFisicoSection = document.getElementById("tipo-fisico-section");
    const tipoFisicoResultadoDiv = document.getElementById("tipo-fisico-resultado");

    // Esconde a seção de inputs
    tipoFisicoSection.style.display = 'none';

    // Obtém detalhes da boneca e descrição
    const detalhes = detalhesTipoFisicoMap[tipo] || detalhesTipoFisicoMap["Indefinido"];

    tipoFisicoResultadoDiv.innerHTML = `
        <div class="card p-4 shadow-sm" style="background-color: #fcfcfc; border-left: 8px solid #28a745;">
            <h3 class="card-title text-center mb-3 text-success">🧍‍♀️ Seu Tipo Físico Estimado é:</h3>
            <p class="card-text text-center display-4" style="color: #6f42c1;"><strong>${tipo}</strong></p>
            <img src="${detalhes.img}" alt="Silhueta do tipo ${tipo}" class="boneca-tipo d-block mx-auto">
            <p class="card-text text-center mt-4">${detalhes.desc}</p>
            <p class="card-text text-muted text-center mt-3 small">Lembre-se que esta é uma estimativa baseada nas medidas. Para uma análise mais aprofundada, consulte um especialista!</p>
        </div>
    `;

    // Adiciona a classe 'show' para ativar a animação CSS
    setTimeout(() => {
        tipoFisicoResultadoDiv.classList.add('show');
    }, 100);
  }

  function selecionarBoneca(numero) {
    document.querySelectorAll('.boneca-img').forEach(el => el.classList.remove('selected'));
    document.querySelectorAll('.boneca-img')[numero - 1].classList.add('selected');
    bonecaSelecionada = numero; // Armazena a boneca selecionada visualmente
    // Em um futuro, a seleção da boneca poderia disparar uma lógica de resultado similar
    // à da calculadora de medidas, mostrando uma descrição e talvez uma imagem maior.
    alert(`Boneca ${numero} selecionada! Esta escolha pode complementar a análise das medidas.`);
  }

  function exportarResultados() {
    const data = {
      estiloQuiz: {
        respostas: respostasEstilo,
        pontuacaoFinal: pontuacaoEstilos,
        estiloPredominante: document.querySelector('#estilo-resultado p.display-4 strong')?.textContent || "Ainda não definido"
      },
      tipoFisico: {
        medidas: {
          ombros: document.getElementById('ombros').value,
          cintura: document.getElementById('cintura').value,
          quadril: document.getElementById('quadril').value
        },
        tipoFisicoCalculado: tipoFisicoCalculado, // Inclui o tipo calculado
        bonecaVisualSelecionada: bonecaSelecionada
      },
      dataExportacao: new Date().toISOString()
    };

    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'resultados_analise_moda.json';
    a.click();
    URL.revokeObjectURL(url); // Libera o objeto URL após o download
  }
</script>

</body>
</html>